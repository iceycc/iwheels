!function(t,r){if("object"==typeof exports&&"object"==typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var e=r();for(var n in e)("object"==typeof exports?exports:t)[n]=e[n]}}(self,(function(){return(()=>{"use strict";var t={d:(r,e)=>{for(var n in e)t.o(e,n)&&!t.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:e[n]})},o:(t,r)=>Object.prototype.hasOwnProperty.call(t,r),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},r={};t.r(r),t.d(r,{applyMiddlewares:()=>n,combineActionCreators:()=>o,combineReducers:()=>i,compose:()=>e,createStore:()=>u});var e={};t.r(e),t.d(e,{default:()=>c});var n={};t.r(n),t.d(n,{default:()=>a});var o={};t.r(o),t.d(o,{default:()=>l});var i={};t.r(i),t.d(i,{default:()=>b});var u={};t.r(u),t.d(u,{default:()=>h});const c=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return 0===t.length?function(t){return t}:1===t.length?t[0]:t.reduce((function(t,r){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t(r.apply(void 0,e))}}))};var f=function(){return(f=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var o in r=arguments[e])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t}).apply(this,arguments)};const a=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return function(r){return function(e,n){var o=r(e,n),i=function(t){throw new Error("还在构建 middlewares，不要 dispatch")},u={getState:o.getState,dispatch:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return i(t)}},a=t.map((function(t){return t(u)}));return i=c.apply(void 0,a)(o.dispatch),f(f({},o),{dispatch:i})}}};function s(t,r){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return r(t.apply(this,e))}}const l=function(t,r){if("function"==typeof t)return s(t,r);var e={};return Object.entries(t).forEach((function(t){var n=t[0],o=t[1];"function"==typeof o&&(e[n]=s(o,r))})),e};var p=function(){return Math.random().toString(36).substring(7).split("").join(".")};const d={INIT:"@@redux/INIT"+p(),REPLACE:"@@redux/REPLACE"+p(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+p()}},y=function(t){if("object"!=typeof t||null===t)return!1;for(var r=t;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r},b=function(t){var r,e={};Object.entries(t).forEach((function(t){var r=t[0],n=t[1];"function"==typeof n&&(e[r]=n)}),{});try{!function(t){Object.values(t).forEach((function(t){if(void 0===t(void 0,{type:d.INIT}))throw new Error("最开始 dispatch 后状态不能为 undefined");if(void 0===t(void 0,{type:d.PROBE_UNKNOWN_ACTION}))throw new Error("乱 dispatch 后的状态也不能是 undefined")}))}(e)}catch(t){r=t}var n={};return function(t,o){if(r)throw r;var i=function(t,r,e,n){if(0===Object.keys(r).length)return"都没有 reducer 还 combine 个啥呀";if(!y(e))return"都说了 action 要是纯净的 Object 了，还传一些乱七八糟的东西进来";if(e.type!==d.REPLACE){var o=Object.keys(t).filter((function(t){return!r.hasOwnProperty(t)&&!n[t]}));return o.forEach((function(t){return n[t]=!0})),o.length>0?"下面这些 Key 都不在 state 上："+o.join(", "):void 0}}(t,e,o,n);i&&console.log(i);var u=!1,c={};return Object.entries(e).forEach((function(r){var e=r[0],n=r[1],i=t[e],f=n(i,o);if(void 0===f)throw new Error("状态不能是 undefined 啊");c[e]=f,u=u||f!==i})),(u=u||Object.keys(e).length===Object.keys(t).length)?c:null}},v="function"==typeof Symbol&&Symbol.observable||"@@observable",h=function t(r,e,n){if(n)return n(t)(r,e);var o=e,i=r,u=[],c=u,f=!1;function a(){if(f)throw new Error("还在 dispatching 呢，获取不了 state 啊");return o}function s(t){if(!y(t))throw new Error("不是纯净的 Object，是一个类似 "+function(t){if(void 0===t)return"undefined";if(null===t)return"null";var r=typeof t;switch(r){case"boolean":case"string":case"number":case"symbol":case"function":return r}if(Array.isArray(t))return"array";if(function(t){return t instanceof Date||"function"==typeof t.toDateString&&"function"==typeof t.getDate&&"function"==typeof t.setDate}(t))return"date";if(function(t){return t instanceof Error||"string"==typeof t.message&&t.constructor&&"number"==typeof t.constructor.stackTraceLimit}(t))return"error";var e=function(t){return"function"==typeof t.constructor?t.constructor.name:null}(t);switch(e){case"Symbol":case"Promise":case"WeakMap":case"WeakSet":case"Map":case"Set":return e}return r}(t)+" 的东西");if(f)throw new Error("还在 dispatching 呢，dispatch 不了啊");try{f=!0,o=i(o,t)}finally{f=!1}return(u=c).forEach((function(t){return t()})),t}function l(){c!==u&&(c=u.slice())}function p(t){if(f)throw new Error("还在 dispatching 呢，subscribe 不了啊");var r=!0;return l(),c.push(t),function(){if(r){if(f)throw new Error("还在 dispatching 呢，unsubscribe 不了啊");r=!1,l();var e=c.indexOf(t);c.splice(e,1),u=[]}}}s({type:d.INIT});var b={getState:a,dispatch:s,subscribe:p,replaceReducer:function(t){return i=t,s({type:d.REPLACE}),b},observable:function(){var t,r=p;return(t={subscribe:function(t){function e(){var r=t;r.next&&r.next(a())}return e(),{unsubscribe:r(e)}}})[v]=function(){return this},t}};return b};return r})()}));